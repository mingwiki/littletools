import{r,ai as L,z as U,v as Z,ag as $,B as S,b as j,_ as w,k as ee,s as te}from"./index.68d31444.js";var f={adjustX:1,adjustY:1},u=[0,0],ne={topLeft:{points:["bl","tl"],overflow:f,offset:[0,-4],targetOffset:u},topCenter:{points:["bc","tc"],overflow:f,offset:[0,-4],targetOffset:u},topRight:{points:["br","tr"],overflow:f,offset:[0,-4],targetOffset:u},bottomLeft:{points:["tl","bl"],overflow:f,offset:[0,4],targetOffset:u},bottomCenter:{points:["tc","bc"],overflow:f,offset:[0,4],targetOffset:u},bottomRight:{points:["tr","br"],overflow:f,offset:[0,4],targetOffset:u}},re=L.ESC,ae=L.TAB;function ie(e){var v=e.visible,C=e.setTriggerVisible,d=e.triggerRef,m=e.menuRef,i=e.onVisibleChange,p=r.exports.useRef(!1),h=function(){if(v&&d.current){var o,a,s,g;(o=d.current)===null||o===void 0||(a=o.triggerRef)===null||a===void 0||(s=a.current)===null||s===void 0||(g=s.focus)===null||g===void 0||g.call(s),C(!1),typeof i=="function"&&i(!1)}},y=function(o){var a;switch(o.keyCode){case re:h();break;case ae:!p.current&&((a=m.current)===null||a===void 0?void 0:a.focus)?(o.preventDefault(),m.current.focus(),p.current=!0):h();break}};r.exports.useEffect(function(){return v?(window.addEventListener("keydown",y),function(){window.removeEventListener("keydown",y),p.current=!1}):function(){return null}},[v])}var oe=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger"];function le(e,v){var C=e.arrow,d=C===void 0?!1:C,m=e.prefixCls,i=m===void 0?"rc-dropdown":m,p=e.transitionName,h=e.animation,y=e.align,b=e.placement,o=b===void 0?"bottomLeft":b,a=e.placements,s=a===void 0?ne:a,g=e.getPopupContainer,W=e.showAction,D=e.hideAction,B=e.overlayClassName,F=e.overlayStyle,K=e.visible,P=e.trigger,M=P===void 0?["hover"]:P,H=U(e,oe),_=r.exports.useState(),R=Z(_,2),z=R[0],x=R[1],O="visible"in e?K:z,A=r.exports.useRef(null);r.exports.useImperativeHandle(v,function(){return A.current});var V=r.exports.useRef(null),I="".concat(i,"-menu");ie({visible:O,setTriggerVisible:x,triggerRef:A,menuRef:V,onVisibleChange:e.onVisibleChange});var k=function(){var t=e.overlay,n;return typeof t=="function"?n=t():n=t,n},X=function(t){var n=e.onOverlayClick,c=k().props;x(!1),n&&n(t),c.onClick&&c.onClick(t)},Y=function(t){var n=e.onVisibleChange;x(t),typeof n=="function"&&n(t)},T=function(){var t,n=k(),c=ee(V,n.ref),N=(t={prefixCls:I},w(t,"data-dropdown-inject",!0),w(t,"onClick",X),w(t,"ref",te(n)?c:void 0),t);return typeof n.type=="string"&&(delete N.prefixCls,delete N["data-dropdown-inject"]),r.exports.createElement(r.exports.Fragment,null,d&&r.exports.createElement("div",{className:"".concat(i,"-arrow")}),r.exports.cloneElement(n,N))},q=function(){var t=e.overlay;return typeof t=="function"?T:T()},G=function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n},J=function(){var t=e.openClassName;return t!==void 0?t:"".concat(i,"-open")},Q=function(){var t=e.children,n=t.props?t.props:{},c=j(n.className,J());return O&&t?r.exports.cloneElement(t,{className:c}):t},E=D;return!E&&M.indexOf("contextMenu")!==-1&&(E=["click"]),r.exports.createElement($,S(S({builtinPlacements:s},H),{},{prefixCls:i,ref:A,popupClassName:j(B,w({},"".concat(i,"-show-arrow"),d)),popupStyle:F,action:M,showAction:W,hideAction:E||[],popupPlacement:o,popupAlign:y,popupTransitionName:p,popupAnimation:h,popupVisible:O,stretch:G()?"minWidth":"",popup:q(),onPopupVisibleChange:Y,getPopupContainer:g}),Q())}var ce=r.exports.forwardRef(le);export{ce as D};
