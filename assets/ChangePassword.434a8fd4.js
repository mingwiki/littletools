import{s as c,r as n,c as C,a1 as w,j as e,a2 as E,a as i,a3 as t}from"./index.0b5d8bb0.js";import{F as o}from"./index.ab55a252.js";import{I as l}from"./index.5e9f8a33.js";import{S as b}from"./index.803c67b2.js";import{B as x}from"./button.0722a1e6.js";import"./TextArea.79316856.js";import"./index.7ee5f5e1.js";import"./responsiveObserve.58c7573a.js";import"./SearchOutlined.a67e739e.js";const g=c.div`
  font-size: 36px;
  margin: 50px 0;
`,D=c.div`
  display: flex;
  flex-direction: column;
  align-items: center;
`,q=()=>{const{AuthStore:a,HeaderStore:p,UserStore:d}=n.exports.useContext(C),{currentUser:m}=d;let F=w();const B=r=>{a.setPassword(r.password),a.changePassword().then(s=>{typeof s=="object"?(t.success("\u4FEE\u6539\u5BC6\u7801\u6210\u529F"),F("/")):t.error("\u8BF7\u767B\u5F55\u540E\u4FEE\u6539\u5BC6\u7801")}).catch(s=>{t.error("\u4FEE\u6539\u5BC6\u7801\u5931\u8D25,\u8BF7\u91CD\u8BD5")})},h=r=>{t.error(r)},{setHeaders:f}=p;return n.exports.useEffect(()=>{f({ghost:!1,onBack:()=>window==null?void 0:window.history.back(),title:"",subTitle:"",extra:[]})},[]),console.log(m),e(E,{children:i(D,{children:[e(g,{children:"\u4FEE\u6539\u5BC6\u7801\u9875\u9762"}),i(o,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:B,onFinishFailed:h,autoComplete:"on",children:[e(o.Item,{label:"\u5BC6\u7801",name:"password",hasFeedback:!0,rules:[{required:!0},({getFieldValue:r})=>({validator(s,u){return/^[\w\d]{3,}$/.test(u)?Promise.resolve():Promise.reject(new Error("\u8BF7\u8F93\u5165\u5BC6\u7801\uFF0C\u4E0D\u80FD\u5305\u542B\u7279\u6B8A\u5B57\u7B26\uFF0C\u6700\u5C113\u4F4D"))}})],children:e(l.Password,{})}),e(o.Item,{label:"\u8F93\u5165\u5BC6\u7801",name:"re-password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0},({getFieldValue:r})=>({validator(s,u){return!u||r("password")===u?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u5339\u914D"))}})],children:e(l.Password,{})}),e(o.Item,{wrapperCol:{offset:8,span:16},children:e(b,{children:e(x,{type:"primary",htmlType:"submit",children:"\u63D0\u4EA4"})})})]})]})})};export{q as default};
