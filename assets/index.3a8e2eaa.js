var st=Object.defineProperty,lt=Object.defineProperties;var at=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var Y=(c,o,s)=>o in c?st(c,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[o]=s,O=(c,o)=>{for(var s in o||(o={}))ct.call(o,s)&&Y(c,s,o[s]);if(x)for(var s of x(o))ht.call(o,s)&&Y(c,s,o[s]);return c},G=(c,o)=>lt(c,at(o));import{r as T,j,ag as ut,a as _}from"./index.2112920b.js";var ft=Object.defineProperty,z=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,X=(c,o,s)=>o in c?ft(c,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[o]=s,y=(c,o)=>{for(var s in o||(o={}))K.call(o,s)&&X(c,s,o[s]);if(z)for(var s of z(o))W.call(o,s)&&X(c,s,o[s]);return c},D=(c,o)=>{var s={};for(var a in c)K.call(c,a)&&o.indexOf(a)<0&&(s[a]=c[a]);if(c!=null&&z)for(var a of z(c))o.indexOf(a)<0&&W.call(c,a)&&(s[a]=c[a]);return s},N;(c=>{const o=class{constructor(t,n,e,r){if(this.version=t,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],t<o.MIN_VERSION||t>o.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=t*4+17;let i=[];for(let l=0;l<this.size;l++)i.push(!1);for(let l=0;l<this.size;l++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const h=this.addEccAndInterleave(e);if(this.drawCodewords(h),r==-1){let l=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);const f=this.getPenaltyScore();f<l&&(r=g,l=f),this.applyMask(g)}}u(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(t,n){const e=c.QrSegment.makeSegments(t);return o.encodeSegments(e,n)}static encodeBinary(t,n){const e=c.QrSegment.makeBytes(t);return o.encodeSegments([e],n)}static encodeSegments(t,n,e=1,r=40,i=-1,h=!0){if(!(o.MIN_VERSION<=e&&e<=r&&r<=o.MAX_VERSION)||i<-1||i>7)throw new RangeError("Invalid value");let l,g;for(l=e;;l++){const E=o.getNumDataCodewords(l,n)*8,M=C.getTotalBits(t,l);if(M<=E){g=M;break}if(l>=r)throw new RangeError("Data too long")}for(const E of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])h&&g<=o.getNumDataCodewords(l,E)*8&&(n=E);let f=[];for(const E of t){a(E.mode.modeBits,4,f),a(E.numChars,E.mode.numCharCountBits(l),f);for(const M of E.getData())f.push(M)}u(f.length==g);const R=o.getNumDataCodewords(l,n)*8;u(f.length<=R),a(0,Math.min(4,R-f.length),f),a(0,(8-f.length%8)%8,f),u(f.length%8==0);for(let E=236;f.length<R;E^=253)a(E,8,f);let w=[];for(;w.length*8<f.length;)w.push(0);return f.forEach((E,M)=>w[M>>>3]|=E<<7-(M&7)),new o(l,n,w,i)}getModule(t,n){return 0<=t&&t<this.size&&0<=n&&n<this.size&&this.modules[n][t]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const t=this.getAlignmentPatternPositions(),n=t.length;for(let e=0;e<n;e++)for(let r=0;r<n;r++)e==0&&r==0||e==0&&r==n-1||e==n-1&&r==0||this.drawAlignmentPattern(t[e],t[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){const n=this.errorCorrectionLevel.formatBits<<3|t;let e=n;for(let i=0;i<10;i++)e=e<<1^(e>>>9)*1335;const r=(n<<10|e)^21522;u(r>>>15==0);for(let i=0;i<=5;i++)this.setFunctionModule(8,i,m(r,i));this.setFunctionModule(8,7,m(r,6)),this.setFunctionModule(8,8,m(r,7)),this.setFunctionModule(7,8,m(r,8));for(let i=9;i<15;i++)this.setFunctionModule(14-i,8,m(r,i));for(let i=0;i<8;i++)this.setFunctionModule(this.size-1-i,8,m(r,i));for(let i=8;i<15;i++)this.setFunctionModule(8,this.size-15+i,m(r,i));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let e=0;e<12;e++)t=t<<1^(t>>>11)*7973;const n=this.version<<12|t;u(n>>>18==0);for(let e=0;e<18;e++){const r=m(n,e),i=this.size-11+e%3,h=Math.floor(e/3);this.setFunctionModule(i,h,r),this.setFunctionModule(h,i,r)}}drawFinderPattern(t,n){for(let e=-4;e<=4;e++)for(let r=-4;r<=4;r++){const i=Math.max(Math.abs(r),Math.abs(e)),h=t+r,l=n+e;0<=h&&h<this.size&&0<=l&&l<this.size&&this.setFunctionModule(h,l,i!=2&&i!=4)}}drawAlignmentPattern(t,n){for(let e=-2;e<=2;e++)for(let r=-2;r<=2;r++)this.setFunctionModule(t+r,n+e,Math.max(Math.abs(r),Math.abs(e))!=1)}setFunctionModule(t,n,e){this.modules[n][t]=e,this.isFunction[n][t]=!0}addEccAndInterleave(t){const n=this.version,e=this.errorCorrectionLevel;if(t.length!=o.getNumDataCodewords(n,e))throw new RangeError("Invalid argument");const r=o.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][n],i=o.ECC_CODEWORDS_PER_BLOCK[e.ordinal][n],h=Math.floor(o.getNumRawDataModules(n)/8),l=r-h%r,g=Math.floor(h/r);let f=[];const R=o.reedSolomonComputeDivisor(i);for(let E=0,M=0;E<r;E++){let p=t.slice(M,M+g-i+(E<l?0:1));M+=p.length;const B=o.reedSolomonComputeRemainder(p,R);E<l&&p.push(0),f.push(p.concat(B))}let w=[];for(let E=0;E<f[0].length;E++)f.forEach((M,p)=>{(E!=g-i||p>=l)&&w.push(M[E])});return u(w.length==h),w}drawCodewords(t){if(t.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let e=this.size-1;e>=1;e-=2){e==6&&(e=5);for(let r=0;r<this.size;r++)for(let i=0;i<2;i++){const h=e-i,g=(e+1&2)==0?this.size-1-r:r;!this.isFunction[g][h]&&n<t.length*8&&(this.modules[g][h]=m(t[n>>>3],7-(n&7)),n++)}}u(n==t.length*8)}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let n=0;n<this.size;n++)for(let e=0;e<this.size;e++){let r;switch(t){case 0:r=(e+n)%2==0;break;case 1:r=n%2==0;break;case 2:r=e%3==0;break;case 3:r=(e+n)%3==0;break;case 4:r=(Math.floor(e/3)+Math.floor(n/2))%2==0;break;case 5:r=e*n%2+e*n%3==0;break;case 6:r=(e*n%2+e*n%3)%2==0;break;case 7:r=((e+n)%2+e*n%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[n][e]&&r&&(this.modules[n][e]=!this.modules[n][e])}}getPenaltyScore(){let t=0;for(let i=0;i<this.size;i++){let h=!1,l=0,g=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[i][f]==h?(l++,l==5?t+=o.PENALTY_N1:l>5&&t++):(this.finderPenaltyAddHistory(l,g),h||(t+=this.finderPenaltyCountPatterns(g)*o.PENALTY_N3),h=this.modules[i][f],l=1);t+=this.finderPenaltyTerminateAndCount(h,l,g)*o.PENALTY_N3}for(let i=0;i<this.size;i++){let h=!1,l=0,g=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[f][i]==h?(l++,l==5?t+=o.PENALTY_N1:l>5&&t++):(this.finderPenaltyAddHistory(l,g),h||(t+=this.finderPenaltyCountPatterns(g)*o.PENALTY_N3),h=this.modules[f][i],l=1);t+=this.finderPenaltyTerminateAndCount(h,l,g)*o.PENALTY_N3}for(let i=0;i<this.size-1;i++)for(let h=0;h<this.size-1;h++){const l=this.modules[i][h];l==this.modules[i][h+1]&&l==this.modules[i+1][h]&&l==this.modules[i+1][h+1]&&(t+=o.PENALTY_N2)}let n=0;for(const i of this.modules)n=i.reduce((h,l)=>h+(l?1:0),n);const e=this.size*this.size,r=Math.ceil(Math.abs(n*20-e*10)/e)-1;return u(0<=r&&r<=9),t+=r*o.PENALTY_N4,u(0<=t&&t<=2568888),t}getAlignmentPatternPositions(){if(this.version==1)return[];{const t=Math.floor(this.version/7)+2,n=this.version==32?26:Math.ceil((this.version*4+4)/(t*2-2))*2;let e=[6];for(let r=this.size-7;e.length<t;r-=n)e.splice(1,0,r);return e}}static getNumRawDataModules(t){if(t<o.MIN_VERSION||t>o.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*t+128)*t+64;if(t>=2){const e=Math.floor(t/7)+2;n-=(25*e-10)*e-55,t>=7&&(n-=36)}return u(208<=n&&n<=29648),n}static getNumDataCodewords(t,n){return Math.floor(o.getNumRawDataModules(t)/8)-o.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t]*o.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t]}static reedSolomonComputeDivisor(t){if(t<1||t>255)throw new RangeError("Degree out of range");let n=[];for(let r=0;r<t-1;r++)n.push(0);n.push(1);let e=1;for(let r=0;r<t;r++){for(let i=0;i<n.length;i++)n[i]=o.reedSolomonMultiply(n[i],e),i+1<n.length&&(n[i]^=n[i+1]);e=o.reedSolomonMultiply(e,2)}return n}static reedSolomonComputeRemainder(t,n){let e=n.map(r=>0);for(const r of t){const i=r^e.shift();e.push(0),n.forEach((h,l)=>e[l]^=o.reedSolomonMultiply(h,i))}return e}static reedSolomonMultiply(t,n){if(t>>>8!=0||n>>>8!=0)throw new RangeError("Byte out of range");let e=0;for(let r=7;r>=0;r--)e=e<<1^(e>>>7)*285,e^=(n>>>r&1)*t;return u(e>>>8==0),e}finderPenaltyCountPatterns(t){const n=t[1];u(n<=this.size*3);const e=n>0&&t[2]==n&&t[3]==n*3&&t[4]==n&&t[5]==n;return(e&&t[0]>=n*4&&t[6]>=n?1:0)+(e&&t[6]>=n*4&&t[0]>=n?1:0)}finderPenaltyTerminateAndCount(t,n,e){return t&&(this.finderPenaltyAddHistory(n,e),n=0),n+=this.size,this.finderPenaltyAddHistory(n,e),this.finderPenaltyCountPatterns(e)}finderPenaltyAddHistory(t,n){n[0]==0&&(t+=this.size),n.pop(),n.unshift(t)}};let s=o;s.MIN_VERSION=1,s.MAX_VERSION=40,s.PENALTY_N1=3,s.PENALTY_N2=3,s.PENALTY_N3=40,s.PENALTY_N4=10,s.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],s.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],c.QrCode=s;function a(t,n,e){if(n<0||n>31||t>>>n!=0)throw new RangeError("Value out of range");for(let r=n-1;r>=0;r--)e.push(t>>>r&1)}function m(t,n){return(t>>>n&1)!=0}function u(t){if(!t)throw new Error("Assertion error")}const d=class{constructor(t,n,e){if(this.mode=t,this.numChars=n,this.bitData=e,n<0)throw new RangeError("Invalid argument");this.bitData=e.slice()}static makeBytes(t){let n=[];for(const e of t)a(e,8,n);return new d(d.Mode.BYTE,t.length,n)}static makeNumeric(t){if(!d.isNumeric(t))throw new RangeError("String contains non-numeric characters");let n=[];for(let e=0;e<t.length;){const r=Math.min(t.length-e,3);a(parseInt(t.substr(e,r),10),r*3+1,n),e+=r}return new d(d.Mode.NUMERIC,t.length,n)}static makeAlphanumeric(t){if(!d.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n=[],e;for(e=0;e+2<=t.length;e+=2){let r=d.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e))*45;r+=d.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e+1)),a(r,11,n)}return e<t.length&&a(d.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e)),6,n),new d(d.Mode.ALPHANUMERIC,t.length,n)}static makeSegments(t){return t==""?[]:d.isNumeric(t)?[d.makeNumeric(t)]:d.isAlphanumeric(t)?[d.makeAlphanumeric(t)]:[d.makeBytes(d.toUtf8ByteArray(t))]}static makeEci(t){let n=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<1<<7)a(t,8,n);else if(t<1<<14)a(2,2,n),a(t,14,n);else if(t<1e6)a(6,3,n),a(t,21,n);else throw new RangeError("ECI assignment value out of range");return new d(d.Mode.ECI,0,n)}static isNumeric(t){return d.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return d.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(t,n){let e=0;for(const r of t){const i=r.mode.numCharCountBits(n);if(r.numChars>=1<<i)return 1/0;e+=4+i+r.bitData.length}return e}static toUtf8ByteArray(t){t=encodeURI(t);let n=[];for(let e=0;e<t.length;e++)t.charAt(e)!="%"?n.push(t.charCodeAt(e)):(n.push(parseInt(t.substr(e+1,2),16)),e+=2);return n}};let C=d;C.NUMERIC_REGEX=/^[0-9]*$/,C.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,C.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",c.QrSegment=C})(N||(N={}));(c=>{(o=>{const s=class{constructor(m,u){this.ordinal=m,this.formatBits=u}};let a=s;a.LOW=new s(0,1),a.MEDIUM=new s(1,0),a.QUARTILE=new s(2,3),a.HIGH=new s(3,2),o.Ecc=a})(c.QrCode||(c.QrCode={}))})(N||(N={}));(c=>{(o=>{const s=class{constructor(m,u){this.modeBits=m,this.numBitsCharCount=u}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};let a=s;a.NUMERIC=new s(1,[10,12,14]),a.ALPHANUMERIC=new s(2,[9,11,13]),a.BYTE=new s(4,[8,16,16]),a.KANJI=new s(8,[8,10,12]),a.ECI=new s(7,[0,0,0]),o.Mode=a})(c.QrSegment||(c.QrSegment={}))})(N||(N={}));var I=N;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var V={L:I.QrCode.Ecc.LOW,M:I.QrCode.Ecc.MEDIUM,Q:I.QrCode.Ecc.QUARTILE,H:I.QrCode.Ecc.HIGH},U={size:128,level:"L",bgColor:"#FFFFFF",fgColor:"#000000",includeMargin:!1},Q=4,dt=.1;function Z(c,o=0){const s=[];return c.forEach(function(a,m){let u=null;a.forEach(function(d,C){if(!d&&u!==null){s.push(`M${u+o} ${m+o}h${C-u}v1H${u+o}z`),u=null;return}if(C===a.length-1){if(!d)return;u===null?s.push(`M${C+o},${m+o} h1v1H${C+o}z`):s.push(`M${u+o},${m+o} h${C+1-u}v1H${u+o}z`);return}d&&u===null&&(u=C)})}),s.join("")}function J(c,o){return c.slice().map((s,a)=>a<o.y||a>=o.y+o.h?s:s.map((m,u)=>u<o.x||u>=o.x+o.w?m:!1))}function q(c,o){const{imageSettings:s,size:a,includeMargin:m}=c;if(s==null)return null;const u=m?Q:0,d=o.length+u*2,C=Math.floor(a*dt),t=d/a,n=(s.width||C)*t,e=(s.height||C)*t,r=s.x==null?o.length/2-n/2:s.x*t,i=s.y==null?o.length/2-e/2:s.y*t;let h=null;if(s.excavate){let l=Math.floor(r),g=Math.floor(i),f=Math.ceil(n+r-l),R=Math.ceil(e+i-g);h={x:l,y:g,w:f,h:R}}return{x:r,y:i,h:e,w:n,excavation:h}}var gt=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function tt(c){const o=T.exports.useRef(null),s=T.exports.useRef(null);function a(){const{value:R,size:w,level:E,bgColor:M,fgColor:p,includeMargin:B}=c;if(o.current!=null){const F=o.current,P=F.getContext("2d");if(!P)return;let v=I.QrCode.encodeText(R,V[E]).getModules();const S=B?Q:0,L=v.length+S*2,A=q(c,v),b=s.current,H=A!=null&&b!==null&&b.complete&&b.naturalHeight!==0&&b.naturalWidth!==0;H&&A.excavation!=null&&(v=J(v,A.excavation));const k=window.devicePixelRatio||1;F.height=F.width=w*k;const $=w/L*k;P.scale($,$),P.fillStyle=M,P.fillRect(0,0,L,L),P.fillStyle=p,gt?P.fill(new Path2D(Z(v,S))):v.forEach(function(nt,rt){nt.forEach(function(ot,it){ot&&P.fillRect(it+S,rt+S,1,1)})}),H&&P.drawImage(b,A.x+S,A.y+S,A.w,A.h)}}T.exports.useEffect(()=>{a()});const m=c,{value:u,size:d,level:C,bgColor:t,fgColor:n,style:e,includeMargin:r,imageSettings:i}=m,h=D(m,["value","size","level","bgColor","fgColor","style","includeMargin","imageSettings"]),l=y({height:d,width:d},e);let g=null,f=i==null?void 0:i.src;return f!=null&&(g=_("img",{src:f,style:{display:"none"},onLoad:()=>{a()},ref:s},f)),j(ut,{children:[_("canvas",O({},y({style:l,height:d,width:d,ref:o},h))),g]})}tt.defaultProps=U;function et(c){const o=c,{value:s,size:a,level:m,bgColor:u,fgColor:d,includeMargin:C,imageSettings:t}=o,n=D(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let e=I.QrCode.encodeText(s,V[m]).getModules();const r=C?Q:0,i=e.length+r*2,h=q(c,e);let l=null;t!=null&&h!=null&&(h.excavation!=null&&(e=J(e,h.excavation)),l=_("image",{xlinkHref:t.src,height:h.h,width:h.w,x:h.x+r,y:h.y+r,preserveAspectRatio:"none"}));const g=Z(e,r);return j("svg",G(O({},y({shapeRendering:"crispEdges",height:a,width:a,viewBox:`0 0 ${i} ${i}`},n)),{children:[_("path",{fill:u,d:`M0,0 h${i}v${i}H0z`}),_("path",{fill:d,d:g}),l]}))}et.defaultProps=U;var mt=c=>{const o=c,{renderAs:s}=o,a=D(o,["renderAs"]);return s==="svg"?_(et,O({},y({},a))):_(tt,O({},y({},a)))};mt.defaultProps=y({renderAs:"canvas"},U);export{tt as QRCodeCanvas,et as QRCodeSVG,mt as default};
