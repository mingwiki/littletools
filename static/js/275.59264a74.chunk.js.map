{"version":3,"file":"static/js/275.59264a74.chunk.js","mappings":"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","sources":["tools/No3/UserCenter.jsx","tools/No3/index.jsx"],"sourcesContent":["import { observer } from 'mobx-react'\nimport React, { useState, useContext, useEffect } from 'react'\nimport {\n  Button,\n  PageHeader,\n  Layout,\n  Typography,\n  notification,\n  Space,\n  Badge,\n  Card,\n  Popover,\n  Spin,\n  Cascader,\n  Empty,\n} from 'antd'\nimport { DeleteOutlined, DoubleRightOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport QRCode from 'qrcode.react'\nimport context from '../../stores'\nimport {\n  cascaderData,\n  miniAppIds,\n  miniAppPages,\n  miniAppPageExtra,\n} from '../../data'\n\nconst StyledHistoryLine = styled.div`\n  margin-bottom: 10px;\n`\nconst CardFlex = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`\nconst MarginRightDiv = styled.div`\n  margin-right: 15px;\n  border: 1px ridge;\n  padding: 0 5px;\n`\nconst { Text } = Typography\nconst { Content } = Layout\nconst Component = observer(() => {\n  const { AuthStore, UserStore, UrlStore, UserCenterStore } =\n    useContext(context)\n  const { logout } = AuthStore\n  const { currentUser } = UserStore\n  const { isSyncing, localUrls, setIsSyncing, setLocalUrls } = UserCenterStore\n  const {\n    textInfo,\n    appId,\n    pagePath,\n    setTextInfo,\n    setAppId,\n    setPagePath,\n    setPageCheckData,\n    queryAll,\n    queryAllByCondition,\n    deleteUrl,\n    uploadAll,\n    getPageType,\n  } = UrlStore\n  const [isShowDrawerQR, setIsShowDrawerQR] = useState([])\n  const [syncOldErr, setSyncOldErr] = useState(false)\n  const syncOld = (urls) => {\n    setIsSyncing(true)\n    uploadAll(urls)\n      .then(\n        (res) => {\n          res?.forEach((item) => {\n            notification.success({\n              description: `已上传${item?.attributes?.name}`,\n            })\n          })\n        },\n        (error) => {\n          setSyncOldErr(true)\n          notification.error({ description: `上传失败请联系开发人员` })\n          notification.error({ description: JSON.stringify(error) })\n        }\n      )\n      .finally(() => {\n        setIsSyncing(false)\n        if (!syncOldErr) localStorage.removeItem('encodedUrl_history')\n      })\n  }\n  const syncPull = () => {\n    setIsSyncing(true)\n    queryAll()\n      .then(\n        (res) => {\n          setIsShowDrawerQR(new Array(Object.entries(res).length).fill(false))\n          setLocalUrls(res)\n          if (Object.entries(res).length === 0) {\n            notification.info({\n              description: `暂无数据`,\n            })\n          } else {\n            notification.success({\n              description: `同步成功`,\n            })\n          }\n        },\n        (error) => {\n          notification.error({ description: `上传失败请联系开发人员` })\n          notification.error({ description: JSON.stringify(error) })\n        }\n      )\n      .finally(() => {\n        setIsSyncing(false)\n      })\n  }\n  const syncPullByCondition = (appId, pagePath) => {\n    setIsSyncing(true)\n    queryAllByCondition(appId, pagePath)\n      .then(\n        (res) => {\n          setIsShowDrawerQR(new Array(Object.entries(res).length).fill(false))\n          setLocalUrls(res)\n          if (Object.entries(res).length === 0) {\n            notification.info({\n              description: `暂无数据`,\n            })\n          } else {\n            notification.success({\n              description: `同步成功`,\n            })\n          }\n        },\n        (error) => {\n          notification.error({ description: `上传失败请联系开发人员` })\n          notification.error({ description: JSON.stringify(error) })\n        }\n      )\n      .finally(() => {\n        setIsSyncing(false)\n      })\n  }\n  const onChangeAppPage = (value) => {\n    setTextInfo(\n      <>\n        {value[0]} <DoubleRightOutlined /> {value[1]}\n      </>\n    )\n    setAppId(miniAppIds[value[0]])\n    setPagePath(miniAppPages[value[0]][value[1]])\n    if (\n      miniAppPageExtra[miniAppIds[value[0]]][miniAppPages[value[0]][value[1]]]\n    ) {\n      setPageCheckData(\n        Object.entries(\n          miniAppPageExtra[miniAppIds[value[0]]][\n            miniAppPages[value[0]][value[1]]\n          ]\n        ).map((e) => {\n          if (typeof e[1] === 'boolean') {\n            e[1] = e[1].toString()\n          }\n          if (!Array.isArray(e[1])) {\n            e[1] = [e[1]]\n          }\n          return e\n        })\n      )\n    } else {\n      setPageCheckData([])\n    }\n  }\n  useEffect(() => {\n    document.title = '个人中心'\n  }, [])\n  return (\n    <>\n      <PageHeader\n        ghost={false}\n        onBack={() => window.history.back()}\n        title='No. 3'\n        subTitle='个人中心管理面板'\n        extra={[\n          localStorage.getItem('encodedUrl_history') && (\n            <Button\n              key={0}\n              type='primary'\n              danger\n              onClick={() => {\n                syncOld(JSON.parse(localStorage.getItem('encodedUrl_history')))\n              }}>\n              上传本地存储数据\n            </Button>\n          ),\n          <Button key={1} type='primary' danger onClick={() => syncPull()}>\n            查询所有数据\n          </Button>,\n          <Button\n            key={2}\n            type='primary'\n            disabled\n            style={{ backgroundColor: '#66a80f', color: 'white' }}>\n            {currentUser?.attributes?.realname}\n          </Button>,\n          <Button key={3} type='primary' danger onClick={() => logout()}>\n            注销\n          </Button>,\n        ]}\n      />\n      <Content className='content'>\n        <div\n          className='site-layout-background'\n          style={{\n            padding: 24,\n            minHeight: 360,\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 20,\n          }}>\n          <Space>\n            <Cascader\n              options={cascaderData}\n              onChange={onChangeAppPage}\n              size='large'\n              notFoundContent='无数据'>\n              <a href='/#'>\n                <Button type='primary'>点击选择或切换</Button>\n              </a>\n            </Cascader>\n            <Button\n              type='dashed'\n              disabled\n              style={{ backgroundColor: '#ffc9c9', color: 'black' }}>\n              {textInfo}\n            </Button>\n            {appId && pagePath ? (\n              <Button\n                type='primary'\n                onClick={() => {\n                  syncPullByCondition(appId, pagePath)\n                }}>\n                查询此页面对应数据\n              </Button>\n            ) : null}\n          </Space>\n          {!isSyncing ? (\n            localUrls?.length > 0 ? (\n              localUrls\n                .slice()\n                .sort((a, b) => (a.name < b.name ? -1 : 1))\n                .map((e, idx) => (\n                  <StyledHistoryLine key={idx}>\n                    <Badge.Ribbon text={idx + 1}>\n                      <Card\n                        title={\n                          <CardFlex>\n                            <Text strong>{e?.attributes?.name}</Text>\n                            <MarginRightDiv>\n                              {getPageType(e?.attributes?.url)}\n                            </MarginRightDiv>\n                          </CardFlex>\n                        }\n                        size='small'\n                        hoverable={true}\n                        type='inner'>\n                        <CardFlex>\n                          <Space>\n                            {e?.attributes?.enterId?.length > 0 && (\n                              <Text code>\n                                入口ID: {e?.attributes?.enterId.join(', ')}\n                              </Text>\n                            )}\n                            {e?.attributes?.sourceOrigin?.length > 0 && (\n                              <Text code>\n                                订单来源:{' '}\n                                {e?.attributes?.sourceOrigin.join(', ')}\n                              </Text>\n                            )}\n                          </Space>\n                          <Space>\n                            <Button\n                              type='dashed'\n                              shape='round'\n                              onClick={() => {\n                                navigator.clipboard.writeText(\n                                  e?.attributes?.url\n                                )\n                                notification.success({\n                                  description: '链接已复制到剪切板',\n                                })\n                              }}>\n                              点击复制链接\n                            </Button>\n                            <Popover\n                              content={\n                                <QRCode value={e?.attributes?.url} size={200} />\n                              }\n                              title='请扫描二维码'\n                              trigger='click'\n                              visible={isShowDrawerQR[idx]}\n                              onVisibleChange={() => {\n                                const temp = [...isShowDrawerQR]\n                                temp[idx] = !temp[idx]\n                                setIsShowDrawerQR(temp)\n                              }}>\n                              <Button\n                                type='dashed'\n                                shape='round'\n                                onClick={() => {\n                                  notification.info({\n                                    description: '查看历史链接二维码',\n                                  })\n                                }}>\n                                点击查看二维码\n                              </Button>\n                            </Popover>\n                            <DeleteOutlined\n                              style={{ color: 'red' }}\n                              onClick={() => {\n                                localUrls.splice(idx, 1)\n                                setLocalUrls(localUrls)\n                                deleteUrl(e.id)\n                              }}\n                            />\n                          </Space>\n                        </CardFlex>\n                      </Card>\n                    </Badge.Ribbon>\n                  </StyledHistoryLine>\n                ))\n            ) : (\n              <Empty />\n            )\n          ) : (\n            <Spin tip='正在和云服务器同步数据' size='large' />\n          )}\n        </div>\n      </Content>\n    </>\n  )\n})\nexport default Component\n","import UserCenter from './UserCenter'\nimport React from 'react'\nimport { Link } from 'react-router-dom'\nimport { Layout } from 'antd'\nimport context from '../../stores'\nimport { observer } from 'mobx-react'\nconst { Header, Content } = Layout\nconst Component = observer(() => {\n  const { UserStore } = React.useContext(context)\n  const { currentUser } = UserStore\n  return (\n    <>\n      <Header\n        className='site-layout-sub-header-background'\n        style={{ padding: 0 }}\n      />\n      <Content className='content'>\n        {currentUser ? (\n          <UserCenter />\n        ) : (\n          <div style={{ display: 'flex', fontSize: '30px' }}>\n            请先<Link to='/login'>登录</Link>或者\n            <Link to='/register'>注册</Link>\n          </div>\n        )}\n      </Content>\n    </>\n  )\n})\nexport default Component\n"],"names":["StyledHistoryLine","styled","CardFlex","MarginRightDiv","Text","Typography","Content","Layout","observer","useContext","context","AuthStore","UserStore","UrlStore","UserCenterStore","logout","currentUser","isSyncing","localUrls","setIsSyncing","setLocalUrls","textInfo","appId","pagePath","setTextInfo","setAppId","setPagePath","setPageCheckData","queryAll","queryAllByCondition","deleteUrl","uploadAll","getPageType","useState","isShowDrawerQR","setIsShowDrawerQR","syncOldErr","setSyncOldErr","useEffect","document","title","ghost","onBack","window","history","back","subTitle","extra","localStorage","getItem","type","danger","onClick","urls","JSON","parse","then","res","forEach","item","notification","description","attributes","name","error","stringify","finally","removeItem","Array","Object","entries","length","fill","disabled","style","backgroundColor","color","realname","className","padding","minHeight","display","flexDirection","gap","options","cascaderData","onChange","value","DoubleRightOutlined","miniAppIds","miniAppPages","miniAppPageExtra","map","e","toString","isArray","size","notFoundContent","href","syncPullByCondition","tip","slice","sort","a","b","idx","text","strong","url","hoverable","enterId","code","join","sourceOrigin","shape","navigator","clipboard","writeText","content","trigger","visible","onVisibleChange","temp","DeleteOutlined","splice","id","Header","React","UserCenter","fontSize","to"],"sourceRoot":""}